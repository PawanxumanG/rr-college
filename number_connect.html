<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Number Connect</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{
  box-sizing:border-box;
  -webkit-tap-highlight-color:transparent;
}
body{
  margin:0;
  font-family:'Segoe UI',Arial,sans-serif;
  background:#0f1117;
  color:#fff;
  text-align:center;
}

/* HEADER */
.header{
  background:linear-gradient(90deg,#ff9800,#ff6a00);
  padding:16px;
  font-size:20px;
  font-weight:700;
}

/* LEVEL TEXT */
.level{
  margin:16px 0;
  font-size:18px;
  opacity:.9;
}

/* GRID */
.grid{
  display:grid;
  gap:12px;
  justify-content:center;
  margin:20px auto;
}

/* CELL */
.cell{
  width:58px;
  height:58px;
  border-radius:12px;
  background:#1c1f26;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:18px;
  font-weight:700;
  cursor:pointer;
}

/* NUMBER CELL */
.cell.number{
  background:#00e5ff;
  color:#000;
}

/* COMPLETED */
.cell.done{
  background:#2ecc71;
  color:#000;
}

/* BUTTON */
.btn{
  margin:22px auto;
  width:90%;
  max-width:320px;
  padding:14px;
  border:none;
  border-radius:14px;
  font-size:16px;
  font-weight:700;
  cursor:pointer;
  color:#fff;
  background:linear-gradient(90deg,#00c6ff,#0072ff);
  display:none;
}
</style>
</head>

<body>

<div class="header">ðŸ”¢ Number Connect</div>
<div class="level" id="levelText"></div>

<div class="grid" id="grid"></div>

<button class="btn" id="nextBtn" onclick="nextLevel()">Next Level â–¶</button>

<script>
/* ================= LEVEL DATA ================= */
const levels = [
  { size:3, numbers:[1,2] },
  { size:4, numbers:[1,2,3] },
  { size:5, numbers:[1,2,3] },
  { size:5, numbers:[1,2,3,4] },
  { size:6, numbers:[1,2,3,4] }
];

let currentLevel = parseInt(localStorage.getItem("numberConnectLevel")) || 1;
let activeNumber = null;
let completed = new Set();

/* ================= INIT ================= */
function loadLevel(){
  const levelIndex = currentLevel - 1;
  const data = levels[levelIndex] || levels[levels.length-1];

  document.getElementById("levelText").innerText =
    "Level " + currentLevel;

  completed.clear();
  activeNumber = null;

  const grid = document.getElementById("grid");
  grid.innerHTML = "";
  grid.style.gridTemplateColumns = `repeat(${data.size}, 1fr)`;

  const total = data.size * data.size;
  let placed = {};

  data.numbers.forEach(n=>{
    placed[n] = 0;
  });

  for(let i=0;i<total;i++){
    const cell = document.createElement("div");
    cell.className = "cell";

    const nums = Object.keys(placed).filter(n=>placed[n]<2);
    if(nums.length && Math.random()<0.25){
      const num = nums[Math.floor(Math.random()*nums.length)];
      placed[num]++;
      cell.innerText = num;
      cell.classList.add("number");
      cell.dataset.num = num;
    }

    cell.onclick = ()=>tap(cell);
    grid.appendChild(cell);
  }

  document.getElementById("nextBtn").style.display="none";
}

/* ================= TAP LOGIC ================= */
function tap(cell){
  if(!cell.dataset.num) return;

  const num = cell.dataset.num;

  if(activeNumber===null){
    activeNumber = num;
    cell.classList.add("done");
    completed.add(cell);
  }else if(activeNumber===num){
    cell.classList.add("done");
    completed.add(cell);
    activeNumber = null;
  }

  checkComplete();
}

/* ================= COMPLETE CHECK ================= */
function checkComplete(){
  const totalNumbers =
    document.querySelectorAll(".cell.number").length;

  if(completed.size === totalNumbers){
    document.getElementById("nextBtn").style.display="block";
    localStorage.setItem("numberConnectLevel", currentLevel+1);
  }
}

/* ================= NEXT ================= */
function nextLevel(){
  currentLevel++;
  loadLevel();
}

/* ================= START ================= */
loadLevel();
</script>

</body>
</html>